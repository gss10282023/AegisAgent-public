### 1)（P0）ui\_elements 字段补齐 enabled / focused 等（对齐你计划 2.2.3）

目前 `UiElementsExtractor` 产出的元素字段主要是：

* `bbox/clickable/package/text/desc/resource_id/(class)`
  但计划里明确希望至少还有：
* `enabled`, `focused`（以及常见的 `selected`, `checked`, `scrollable` 也非常有用）

**建议做法：**

* uiautomator xml 里这些属性天然存在，直接解析并写入 element；
* a11y tree 里如果有同类字段也映射进来；
* 保持向后兼容：字段缺失就置 `None` 或不写。

这能明显增强你们后续 SP2/SP8（来源/绑定一致性）相关的判定与分析能力。

---

### 2)（P0）device\_trace 的 infra probes 再补“网络/飞行模式/自动时间”三项（对齐你计划 2.2.4）

`BootHealthOracle.capture_device_infra()` 目前主要有：

* adb\_ok、boot\_completed、sdcard\_writable（很好，但还不够）

**建议加：**

* 飞行模式：`settings get global airplane_mode_on`
* 网络：`dumpsys connectivity`（提取 active network）或更轻量的 `ping`/`cmd connectivity`
* 自动时间/时区：`settings get global auto_time`、`getprop persist.sys.timezone`

这样以后你在报告里区分 `infra_failed`、解释 oracle inconclusive，会省很多时间。

---

### 3)（P0）Action Normalizer 的动作集合对齐 v3.1（对齐 Phase3.7，但最好现在就改）

你们已经有 `mas_harness/action_normalizer.py`，但动作名目前更像“内部草案”：

* 有 `type_text/back/stop`，但计划要求是 `type/press_back/finished`，并要求 `open_app/open_url`。

**建议：**

* 统一 action type 命名到计划那套（同时保留 aliases）：
  * `type_text -> type`
  * `back -> press_back`
  * `stop -> finished`
  * 补 `open_app/open_url`
* 在 `agent_action_trace` 里写一个 `action_schema_version`（方便未来迁移）。

这能避免 Phase3 接三套 agent 时动作类型对不上、后面再返工。

---

### 4)（P1）抽掉 provider oracles 的重复“adb 执行 + meta 判定”样板代码

你现在在 `sms/contacts/calendar/calllog/mediastore` 里有大量重复函数：

* `_run_content_query`, `_content_query_meta_ok`, `_content_query_cmd` 等

建议提一个公共 util（例如 `oracle_zoo/utils/adb_content.py`）：

* 统一处理 timeout、returncode、permission denial、stdout/stderr、截断策略；
* 统一产生 query meta；
* 统一 result\_preview 的脱敏策略。

这样可以减少“每加一个 provider oracle 就复制一套”的维护成本，也更不容易出现不同 oracle 对同一类错误判定不一致的问题。

---
