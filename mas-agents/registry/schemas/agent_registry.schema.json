{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "MAS Agent Registry",
  "type": "array",
  "items": {
    "type": "object",
    "required": ["agent_id", "agent_name", "open_status", "availability", "tier"],
    "properties": {
      "agent_id": { "type": "string" },
      "agent_name": { "type": "string" },
      "open_status": {
        "type": "string",
        "enum": ["open", "closed", "unknown"]
      },
      "availability": {
        "type": "string",
        "enum": ["runnable", "audit_only", "unavailable"]
      },
      "tier": {
        "type": "string",
        "enum": ["core", "extended"]
      },
      "env_profile": {
        "type": "string",
        "enum": ["mas_core", "android_world_compat"]
      },
      "execution_mode_supported": {
        "type": "array",
        "items": {
          "type": "string",
          "enum": ["planner_only", "agent_driven"]
        }
      },
      "action_trace_level": {
        "type": "string",
        "enum": ["L0", "L1", "L2", "L3", "none"]
      },
      "obs_modalities_required": {
        "type": "array",
        "items": {
          "type": "string",
          "enum": ["screenshot", "ui_elements", "uiautomator_xml"]
        }
      },
      "adapter": { "type": "string" },
      "ingest": { "type": "string" },
      "trajectory_format": { "type": "string" },
      "notes": { "type": "string" },
      "unavailable_reason": { "type": "string" }
    },
    "allOf": [
      {
        "if": { "properties": { "availability": { "const": "runnable" } } },
        "then": { "required": ["adapter"] }
      },
      {
        "if": { "properties": { "availability": { "const": "audit_only" } } },
        "then": {
          "anyOf": [{ "required": ["ingest"] }, { "required": ["trajectory_format"] }]
        }
      },
      {
        "if": { "properties": { "availability": { "const": "unavailable" } } },
        "then": { "required": ["unavailable_reason"] }
      }
    ],
    "additionalProperties": true
  }
}
